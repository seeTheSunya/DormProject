<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>로그인 - 도란</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        /* 강제 캐시 방지 */
        html, body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100">
    <div id="login-app" class="flex items-center justify-center min-h-screen py-8 px-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-96 max-w-full">
            <!-- 로고 영역 -->
            <div class="logo-center" style="display: flex; align-items: center; justify-content: center; width: 100%;">
                <img src="/assets/doran-logo.png" alt="도란 로고" class="center-logo" style="width: 70%; height: auto; transform: scale(0.7); transform-origin: center; margin: 0 auto; display: block;" onerror="this.src='/assets/doran-logo.jpg'; this.onerror=null;" />
            </div>
            
            <form @submit.prevent="login" class="login-form">
                <div class="mb-5">
                    <label class="block mb-2 text-sm font-semibold text-gray-700">아이디</label>
                    <input type="text" v-model="username" 
                           class="w-full border-2 border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" 
                           placeholder="아이디를 입력하세요" required>
                </div>
                <div class="mb-6">
                    <label class="block mb-2 text-sm font-semibold text-gray-700">비밀번호</label>
                    <input type="password" v-model="password" 
                           class="w-full border-2 border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" 
                           placeholder="비밀번호를 입력하세요" required>
                </div>
                <button type="submit" 
                        class="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 mb-4 shadow-lg transform hover:scale-[1.02] transition-all duration-200">
                    로그인
                </button>
            </form>
            
            <div class="mt-6 text-center flex justify-between px-2">
                <a href="find_account.html" class="text-sm text-gray-600 hover:text-blue-600 hover:underline transition-colors">아이디/비번 찾기</a>
                <a href="signup.html" class="text-sm text-blue-600 font-semibold hover:text-blue-700 hover:underline transition-colors">회원가입</a>
            </div>
            <div class="mt-6 text-center pt-4 border-t border-gray-200">
                <a href="main.html" class="text-sm text-gray-500 hover:text-gray-700 hover:underline transition-colors inline-flex items-center">
                    <span class="mr-1">←</span> 메인으로 돌아가기
                </a>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    username: '',
                    password: ''
                }
            },
            methods: {
                async login() {
                    try {
                        const response = await axios.post('http://localhost:8081/api/login', {
                            username: this.username,
                            password: this.password
                        });
                        localStorage.setItem('loggedInUser', response.data.username);
                        alert('로그인되었습니다!');
                        window.location.href = 'main.html';
                    } catch (error) {
                        alert("로그인 실패: 아이디 또는 비밀번호를 확인해주세요.");
                    }
                }
            }
        }).mount('#login-app');
    </script>
</body>
</html>

